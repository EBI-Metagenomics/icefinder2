var jsonData = {'xData': [24.087, 24.137, 24.187, 24.237, 24.287, 24.337, 24.387, 24.437, 24.487, 24.537, 24.587, 24.637, 24.687, 24.737, 24.787, 24.837, 24.887, 24.937, 24.987, 25.037, 25.087, 25.137, 25.187, 25.237, 25.287, 25.337, 25.387, 25.437, 25.487, 25.537, 25.587, 25.637, 25.687, 25.737, 25.787, 25.837, 25.887, 25.937, 25.987, 26.037, 26.087, 26.137, 26.187, 26.237, 26.287, 26.337, 26.387, 26.437, 26.487, 26.537, 26.587, 26.637, 26.687, 26.737, 26.787, 26.837, 26.887, 26.937, 26.987, 27.037, 27.087, 27.137, 27.187, 27.237, 27.287, 27.337, 27.387, 27.437, 27.487, 27.537, 27.587, 27.637, 27.687, 27.737, 27.787, 27.837, 27.887, 27.937, 27.987, 28.037, 28.087, 28.137, 28.187, 28.237, 28.287, 28.337, 28.387, 28.437, 28.487, 28.537, 28.587, 28.637, 28.687, 28.737, 28.787, 28.837, 28.887, 28.937, 28.987, 29.037, 29.087, 29.137, 29.187, 29.237, 29.287, 29.337, 29.387, 29.437, 29.487, 29.537, 29.587, 29.637, 29.687, 29.737, 29.787, 29.837, 29.887, 29.937, 29.987, 30.037, 30.087, 30.137, 30.187, 30.237, 30.287, 30.337, 30.387, 30.437, 30.487, 30.537, 30.587, 30.637, 30.687, 30.737, 30.787, 30.837, 30.887, 30.937, 30.987, 31.037, 31.087, 31.137, 31.187, 31.237, 31.287, 31.337, 31.387, 31.437, 31.487, 31.537, 31.587, 31.637, 31.687, 31.737, 31.787, 31.837, 31.887, 31.937, 31.987, 32.037, 32.087, 32.137, 32.187, 32.237, 32.287, 32.337, 32.387, 32.437, 32.487, 32.537, 32.587, 32.637, 32.687, 32.737, 32.787, 32.837, 32.887, 32.937, 32.987, 33.037, 33.087, 33.137, 33.187, 33.237, 33.287, 33.337, 33.387, 33.437, 33.487, 33.537, 33.587, 33.637, 33.687, 33.737, 33.787, 33.837, 33.887, 33.937, 33.987, 34.037, 34.087, 34.137, 34.187, 34.237, 34.287, 34.337, 34.387, 34.437, 34.487, 34.537, 34.587, 34.637, 34.687, 34.737, 34.787, 34.837, 34.887, 34.937, 34.987, 35.037, 35.087, 35.137, 35.187, 35.237, 35.287, 35.337, 35.387, 35.437, 35.487, 35.537, 35.587, 35.637, 35.687, 35.737, 35.787, 35.837, 35.887, 35.937, 35.987, 36.037, 36.087, 36.137, 36.187, 36.237, 36.287, 36.337, 36.387, 36.437, 36.487, 36.537, 36.587, 36.637, 36.687, 36.737, 36.787, 36.837, 36.887, 36.937, 36.987, 37.037, 37.087, 37.137, 37.187, 37.237, 37.287, 37.337, 37.387, 37.437, 37.487, 37.537, 37.587, 37.637, 37.687, 37.737, 37.787, 37.837, 37.887, 37.937, 37.987, 38.037, 38.087, 38.137, 38.187, 38.237, 38.287, 38.337, 38.387, 38.437, 38.487, 38.537, 38.587, 38.637, 38.687, 38.737, 38.787, 38.837, 38.887, 38.937, 38.987, 39.037, 39.087, 39.137, 39.187, 39.237, 39.287, 39.337, 39.387, 39.437, 39.487, 39.537, 39.587, 39.637, 39.687, 39.737, 39.787, 39.837, 39.887, 39.937, 39.987, 40.037, 40.087, 40.137, 40.187, 40.237, 40.287, 40.337, 40.387, 40.437, 40.487, 40.537, 40.587, 40.637, 40.687, 40.737, 40.787, 40.837, 40.887, 40.937, 40.987, 41.037, 41.087, 41.137, 41.187, 41.237, 41.287, 41.337, 41.387, 41.437, 41.487, 41.537, 41.587, 41.637, 41.687, 41.737, 41.787, 41.837, 41.887, 41.937, 41.987, 42.037, 42.087, 42.137, 42.187, 42.237, 42.287, 42.337, 42.387, 42.437, 42.487, 42.537, 42.587, 42.637, 42.687, 42.737, 42.787, 42.837, 42.887, 42.937, 42.987, 43.037, 43.087, 43.137, 43.187, 43.237, 43.287, 43.337, 43.387, 43.437, 43.487, 43.537, 43.587, 43.637, 43.687, 43.737, 43.787, 43.837, 43.887, 43.937, 43.987, 44.037, 44.087, 44.137, 44.187, 44.237, 44.287, 44.337, 44.387, 44.437, 44.487, 44.537, 44.587, 44.637, 44.687, 44.737, 44.787, 44.837, 44.887, 44.937, 44.987, 45.037, 45.087, 45.137, 45.187, 45.237, 45.287, 45.337, 45.387, 45.437, 45.487, 45.537, 45.587, 45.637, 45.687, 45.737, 45.787, 45.837, 45.887, 45.937, 45.987, 46.037, 46.087, 46.137, 46.187, 46.237, 46.287, 46.337, 46.387, 46.437, 46.487, 46.537, 46.587, 46.637, 46.687, 46.737, 46.787, 46.837, 46.887, 46.937, 46.987, 47.037, 47.087, 47.137, 47.187, 47.237, 47.287, 47.337, 47.387, 47.437, 47.487, 47.537, 47.587, 47.637, 47.687, 47.737, 47.787, 47.837, 47.887, 47.937, 47.987, 48.037, 48.087, 48.137, 48.187, 48.237, 48.287, 48.337, 48.387, 48.437, 48.487, 48.537, 48.587, 48.637, 48.687, 48.737, 48.787, 48.837, 48.887, 48.937, 48.987, 49.037, 49.087, 49.137, 49.187, 49.237, 49.287, 49.337, 49.387, 49.437, 49.487, 49.537, 49.587, 49.637, 49.687, 49.737, 49.787, 49.837, 49.887, 49.937, 49.987, 50.037, 50.087, 50.137, 50.187, 50.237, 50.287, 50.337, 50.387, 50.437, 50.487, 50.537, 50.587, 50.637, 50.687, 50.737, 50.787, 50.837, 50.887, 50.937, 50.987, 51.037, 51.087, 51.137, 51.187, 51.237, 51.287, 51.337, 51.387, 51.437, 51.487, 51.537, 51.587, 51.637, 51.687, 51.737, 51.787, 51.837, 51.887, 51.937, 51.987, 52.037, 52.087, 52.137, 52.187, 52.237, 52.287, 52.337, 52.387, 52.437, 52.487, 52.537, 52.587, 52.637, 52.687, 52.737, 52.787, 52.837, 52.887, 52.937, 52.987, 53.037, 53.087, 53.137, 53.187, 53.237, 53.287, 53.337, 53.387, 53.437, 53.487, 53.537, 53.587, 53.637, 53.687, 53.737, 53.787, 53.837, 53.887, 53.937, 53.987, 54.037, 54.087, 54.137, 54.187, 54.237, 54.287, 54.337, 54.387, 54.437, 54.487, 54.537, 54.587, 54.637, 54.687, 54.737, 54.787, 54.837, 54.887, 54.937, 54.987, 55.037, 55.087, 55.137, 55.187, 55.237, 55.287, 55.337, 55.387, 55.437, 55.487, 55.537, 55.587, 55.637, 55.687, 55.737, 55.787, 55.837, 55.887, 55.937, 55.987, 56.037, 56.087, 56.137, 56.187, 56.237, 56.287, 56.337, 56.387, 56.437, 56.487, 56.537, 56.587, 56.637, 56.687, 56.737, 56.787, 56.837, 56.887, 56.937, 56.987, 57.037, 57.087, 57.137, 57.187, 57.237, 57.287, 57.337, 57.387, 57.437, 57.487, 57.537, 57.587, 57.637, 57.687, 57.737, 57.787, 57.837, 57.887, 57.937, 57.987, 58.037, 58.087, 58.137, 58.187, 58.237, 58.287, 58.337, 58.387, 58.437, 58.487, 58.537, 58.587, 58.637, 58.687, 58.737, 58.787, 58.837, 58.887, 58.937, 58.987, 59.037, 59.087, 59.137, 59.187, 59.237, 59.287, 59.337, 59.387, 59.437, 59.487, 59.537, 59.587, 59.637, 59.687, 59.737, 59.787, 59.837, 59.887, 59.937, 59.987, 60.037, 60.087, 60.137, 60.187, 60.237, 60.287, 60.337, 60.387, 60.437, 60.487, 60.537, 60.587, 60.637, 60.687, 60.737, 60.787, 60.837], 'datasets': [{'name': '', 'data': [36.6, 36.8, 38.2, 37.6, 37.4, 35.8, 35.2, 34.4, 32.6, 30.6, 29.2, 26.8, 26.0, 25.4, 26.0, 26.6, 26.4, 28.0, 27.4, 26.8, 26.0, 27.2, 25.8, 26.6, 26.6, 26.6, 28.6, 26.6, 27.8, 30.2, 30.8, 31.0, 31.8, 31.6, 32.4, 33.8, 32.2, 33.4, 34.0, 31.8, 31.8, 31.8, 32.6, 32.8, 32.0, 30.6, 30.0, 29.4, 29.4, 31.2, 31.4, 32.0, 31.2, 31.4, 31.6, 32.0, 32.4, 32.2, 31.6, 29.8, 30.2, 30.0, 31.4, 31.6, 32.2, 32.2, 33.0, 33.2, 34.2, 35.6, 35.4, 35.8, 34.8, 35.8, 35.0, 36.0, 36.0, 37.4, 37.8, 38.0, 38.0, 37.8, 38.0, 37.0, 37.4, 37.4, 36.8, 37.2, 36.6, 36.4, 36.6, 36.2, 36.0, 37.0, 37.0, 36.6, 36.8, 35.8, 36.2, 36.2, 35.8, 36.2, 37.0, 37.0, 37.6, 38.4, 39.6, 39.6, 39.0, 39.8, 39.4, 40.4, 39.8, 38.6, 38.4, 37.6, 36.2, 35.0, 33.4, 32.2, 31.6, 28.4, 27.8, 27.6, 27.0, 27.2, 27.2, 28.2, 29.6, 30.4, 31.0, 32.6, 33.0, 32.2, 32.4, 32.4, 32.4, 32.2, 32.2, 30.8, 30.6, 29.8, 28.8, 28.2, 27.2, 26.6, 27.2, 26.8, 25.8, 25.6, 25.2, 27.4, 26.8, 26.8, 26.4, 25.2, 24.2, 25.0, 25.6, 26.4, 26.0, 24.4, 24.6, 26.2, 27.4, 29.0, 29.0, 27.6, 27.2, 26.4, 26.8, 26.6, 27.8, 28.0, 28.0, 27.8, 28.4, 29.6, 31.0, 32.2, 35.0, 36.0, 36.4, 36.4, 37.8, 38.8, 39.0, 39.6, 40.0, 40.2, 39.4, 39.6, 40.2, 39.8, 39.8, 39.6, 40.8, 40.2, 39.8, 40.8, 39.4, 40.2, 40.8, 41.4, 40.6, 41.0, 41.4, 42.6, 43.2, 42.2, 43.2, 42.2, 42.2, 42.4, 42.0, 42.6, 41.8, 40.4, 40.0, 40.8, 41.2, 41.4, 40.4, 41.2, 42.0, 41.6, 40.8, 42.4, 42.6, 42.8, 42.2, 42.6, 41.8, 41.2, 41.0, 41.8, 42.4, 41.8, 42.0, 41.4, 41.6, 41.0, 42.4, 42.6, 43.2, 41.8, 42.0, 41.8, 41.4, 42.6, 43.0, 43.2, 43.6, 43.2, 42.4, 41.8, 41.2, 41.2, 41.6, 40.6, 39.6, 40.2, 39.6, 39.6, 40.0, 40.8, 39.6, 39.8, 40.2, 40.2, 40.8, 40.2, 40.6, 41.2, 39.8, 40.0, 41.6, 40.6, 40.2, 40.0, 40.0, 40.8, 41.2, 40.6, 40.6, 41.0, 40.4, 41.4, 41.0, 40.8, 40.8, 39.2, 38.8, 39.4, 40.0, 39.8, 40.6, 40.2, 39.8, 40.0, 40.4, 41.0, 41.2, 41.0, 41.0, 39.8, 40.4, 40.6, 41.4, 40.6, 40.2, 40.6, 38.8, 38.4, 38.6, 39.2, 38.4, 38.6, 39.0, 39.6, 39.0, 39.0, 39.6, 39.2, 39.6, 40.4, 39.6, 39.4, 39.4, 39.4, 40.0, 39.4, 40.0, 39.2, 39.0, 38.4, 39.6, 39.4, 39.2, 39.0, 39.6, 40.8, 41.6, 42.6, 43.4, 43.4, 42.0, 42.4, 42.4, 41.6, 41.6, 41.2, 39.0, 39.8, 38.8, 39.0, 39.8, 40.4, 40.2, 41.6, 41.4, 40.2, 41.0, 40.4, 41.0, 40.6, 41.2, 40.0, 39.6, 39.8, 38.8, 40.2, 41.2, 40.8, 40.8, 40.8, 40.2, 40.8, 41.4, 40.6, 42.2, 42.4, 42.4, 43.6, 43.2, 43.4, 43.8, 43.0, 43.0, 42.8, 42.0, 41.4, 40.4, 39.6, 40.2, 39.4, 40.2, 40.4, 40.6, 41.6, 42.2, 42.0, 42.6, 43.6, 42.4, 42.8, 41.8, 43.2, 43.0, 42.8, 40.8, 40.8, 41.2, 41.0, 42.0, 42.4, 42.4, 41.0, 41.6, 42.0, 42.8, 42.6, 42.2, 41.6, 40.8, 40.6, 41.2, 41.4, 40.0, 39.6, 40.6, 41.8, 42.4, 42.4, 43.8, 44.4, 43.6, 42.8, 42.2, 42.0, 39.8, 38.4, 36.6, 35.6, 33.6, 31.8, 32.2, 32.8, 33.2, 33.4, 35.2, 35.4, 35.4, 35.2, 36.6, 37.2, 36.4, 36.0, 36.2, 35.8, 33.8, 34.4, 33.4, 33.8, 32.6, 32.0, 32.6, 33.0, 32.8, 32.8, 33.4, 32.2, 33.6, 33.2, 33.8, 35.0, 35.6, 37.8, 40.2, 39.8, 42.6, 44.4, 45.6, 46.8, 46.8, 47.2, 46.2, 44.0, 43.6, 44.0, 44.0, 43.4, 43.0, 43.2, 44.6, 43.8, 44.8, 45.2, 44.0, 44.6, 43.0, 42.8, 43.0, 43.0, 41.8, 41.8, 41.6, 41.2, 41.6, 41.8, 41.4, 42.0, 42.4, 41.8, 41.6, 42.6, 42.6, 42.6, 43.0, 42.0, 42.4, 41.2, 39.2, 40.0, 40.2, 39.6, 37.8, 37.6, 36.4, 36.2, 36.4, 37.6, 39.0, 38.2, 38.0, 38.8, 39.8, 39.8, 40.6, 40.0, 40.0, 40.2, 40.6, 41.6, 42.2, 41.4, 41.4, 41.4, 40.4, 43.0, 41.8, 41.0, 40.6, 40.0, 39.0, 38.8, 38.8, 39.6, 40.0, 39.2, 40.4, 40.8, 39.2, 39.0, 39.8, 41.2, 41.2, 41.4, 42.0, 41.0, 40.6, 39.4, 40.4, 40.0, 39.6, 38.2, 37.8, 37.4, 37.0, 36.6, 36.8, 37.6, 38.8, 38.0, 38.6, 40.0, 41.6, 42.2, 42.6, 44.2, 43.6, 43.8, 43.4, 44.6, 43.4, 42.6, 42.0, 42.0, 42.2, 41.4, 42.8, 43.6, 43.0, 42.2, 43.8, 44.4, 44.4, 43.6, 43.6, 42.6, 42.0, 41.4, 40.4, 42.0, 41.8, 41.4, 40.4, 41.2, 39.6, 41.0, 40.8, 41.0, 42.0, 41.2, 40.0, 39.6, 40.0, 38.8, 39.8, 40.6, 40.6, 40.8, 40.4, 39.8, 40.0, 39.8, 40.4, 41.0, 41.2, 39.2, 40.0, 38.8, 38.2, 39.8, 40.2, 39.8, 39.6, 39.2, 38.4, 39.2, 38.4, 38.0, 39.6, 39.2, 38.6, 39.6, 39.2, 39.0, 39.4, 40.4, 40.4, 41.6, 41.0, 40.2, 40.8, 39.2, 39.0, 39.0, 38.4, 36.6, 37.0, 35.8, 36.2, 36.4, 36.4, 38.0, 39.0, 39.0, 40.2, 40.2, 39.4, 40.4, 40.4, 41.4, 41.8, 40.4, 39.8, 39.8, 38.8, 38.8, 38.6, 38.6, 38.6, 38.2, 38.0, 39.6, 40.2, 41.8, 42.4, 45.0, 46.2, 46.6, 47.0, 47.0, 47.0, 46.2, 45.8, 45.6, 46.0, 45.6, 45.2, 45.0, 45.4, 44.8, 44.4, 43.8, 43.4, 41.6, 40.8, 38.4, 38.4, 39.0, 37.4, 38.2, 38.4, 38.8, 38.8, 40.8, 41.2, 42.0, 41.8, 39.8, 40.0, 39.4, 39.8, 39.4], 'unit': '%', 'type': 'line', 'valueDecimals': 1}]};
let container = document.getElementById('gcmap'),
  highlightPoint = function(e) {
    var chart,
      point,
      i,
      event;
    for (i = 0; i < Highcharts.charts.length; i = i + 1) {
      chart = Highcharts.charts[i];
      // Find coordinates within the chart
      event = chart.pointer.normalize(e);
      // Get the hovered point
      point = chart.series[0].searchPoint(event, true);
      if (point) {
        point.highlight(e);
      }
    }
  };
['mousemove', 'touchmove', 'touchstart'].forEach(function (eventType) {
  container.addEventListener(
    eventType,
    function (e) {
      highlightPoint(e);
    }
  );
});
/**
 * 重写内部的方法， 这里是将提示框即十字准星的隐藏函数关闭
 */
Highcharts.Pointer.prototype.reset = function () {
  return undefined;
};
/**
 * 高亮当前的数据点，并设置鼠标滑动状态及绘制十字准星线
 */
Highcharts.Point.prototype.highlight = function (event) {
  this.onMouseOver(); // 显示鼠标激活标识
  this.series.chart.tooltip.refresh(this); // 显示提示框
  this.series.chart.xAxis[0].drawCrosshair(event, this); // 显示十字准星线
};
/**
 * 同步缩放效果，即当一个图表进行了缩放效果，其他图表也进行缩放
 */
function syncExtremes(e) {
  var thisChart = this.chart;
  if (e.trigger !== 'syncExtremes') { 
    Highcharts.each(Highcharts.charts, function (chart) {
      if (chart !== thisChart) {
        if (chart.xAxis[0].setExtremes) { 
          chart.xAxis[0].setExtremes(e.min, e.max, undefined, false, { trigger: 'syncExtremes' });
        }
      }
    });
  }
}
// 使用定义的JSON数据
var activity = jsonData;

activity.datasets.forEach(function (dataset, i) {
  // Add X values
  dataset.data = Highcharts.map(dataset.data, function (val, j) {
    return [activity.xData[j], val];
  });
  var chartDiv = document.createElement('div');
  chartDiv.className = 'chart';
  container.appendChild(chartDiv);
  Highcharts.chart(chartDiv, {
    chart: {
      width: 990,
      height: 200,
      marginLeft: 45, // Keep all charts left aligned
      spacingTop: 20,
      spacingBottom: 20
    },
    title: {
      text: dataset.name,
      align: 'left',
      margin: 0,
      x: 30
    },
    credits: {
      enabled: false
    },
    legend: {
      enabled: false
    },
    xAxis: {
      crosshair: true,
      events: {
        setExtremes: syncExtremes
      },
      labels: {
        format: '{value} k'
      }
    },
    yAxis: {
      title: {
        text: null
      }
    },
    tooltip: {
      positioner: function () {
        return {
          // right aligned
          x: this.chart.chartWidth - this.label.width,
          y: 10 // align to title
        };
      },
      borderWidth: 0,
      backgroundColor: 'none',
      pointFormat: '{point.y}',
      headerFormat: '',
      shadow: false,
      style: {
        fontSize: '12px'
      },
      valueDecimals: dataset.valueDecimals
    },
    series: [{
      data: dataset.data,
      name: dataset.name,
      type: dataset.type,
      lineWidth:1,
      color: Highcharts.getOptions().colors[i],
      fillOpacity: 0.3,
      tooltip: {
        valueSuffix: ' ' + dataset.unit
      }
    }]
  });
});
